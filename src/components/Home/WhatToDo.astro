---
import { Image } from 'astro:assets';
import what01 from '../../assets/what01.webp';
import what02 from '../../assets/what02.webp';
import what03 from '../../assets/what03.webp';
import what04 from '../../assets/what04.webp';
import what05 from '../../assets/what05.webp';
import 'swiper/css';
import 'swiper/css/navigation';


---

<section id="que-hacemos" class="section services-section bg-white animate-on-scroll">
    <div class="container">
        <h2 class="section-title">¿Qué hacemos?</h2>
        <p class="services-intro">
            Ofrecemos un portafolio completo de servicios enfocados en asegurar la eficiencia, calidad y cumplimiento normativo de cada proyecto:
        </p>
    <div class="swiper services-swiper">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="service-card">
                    <Image src={what01} alt="Equipo Profesional de JRC Ingenieros y Consultores" class="service-card-img" />
                    <div class="service-card-content">
                        <h3>Estudios de ingeniería</h3>
                        <p>Desde perfil hasta expediente técnico detallado.</p>
                    </div>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="service-card">
                    <Image src={what02} alt="Consultoría Técnica Especializada" class="service-card-img"/>
                    <div class="service-card-content">
                        <h3>Consultoría especializada</h3>
                        <p>Soluciones técnicas adaptadas a cada necesidad específica.</p>
                    </div>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="service-card">
                    <Image src={what03} alt="ESupervisión Rigurosa de Obras" class="service-card-img"/>
                    <div class="service-card-content">
                        <h3>Supervisión de obras</h3>
                        <p>Control de calidad, plazos y cumplimiento de normativas.</p>
                    </div>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="service-card">
                    <Image src={what04} alt="Gestión Eficiente de Proyectos Mineros" class="service-card-img"/>
                    <div class="service-card-content">
                        <h3>Gestión de proyectos</h3>
                        <p>Planificación, control y ejecución eficiente de inicio a fin.</p>
                    </div>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="service-card">
                    <Image src={what05} alt="Asesoría Estratégica para Minería" class="service-card-img"/>
                    <div class="service-card-content">
                        <h3>Asesoría estratégica</h3>
                        <p>Para una toma de decisiones sólida, informada y sostenible.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    </div> 
    </div> 
</section>


<style>


.services-intro {
    text-align: center;
    max-width: 800px;
    margin: 0 auto 50px auto; 
    font-size: 1.1rem;
    color: var(--color-secondary);
    line-height: 1.7;
}

.services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 35px; 
}

.service-card {
    background-color: var(--color-white); 
    border-radius: 8px;
    overflow: hidden; 
    box-shadow: 0 5px 20px rgba(47, 62, 70, 0.12); 
    display: flex;
    flex-direction: column; 
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 1px solid #eee; 
}

.service-card:hover {
    transform: translateY(-6px); 
    box-shadow: 0 8px 30px rgba(47, 62, 70, 0.18);
}

.service-card-img {
    width: 100%;
    height: 200px; 
    object-fit: cover; 
    display: block; 
}

.service-card-content {
    padding: 25px;
    flex-grow: 1; 
    display: flex;
    flex-direction: column;
}

.service-card-content h3 {
    font-family: var(--font-title);
    font-weight: 600;
    font-size: 1.35rem; 
    color: var(--color-primary); 
    margin-top: 0;
    margin-bottom: 10px;
}

.service-card-content p {
    font-size: 0.95rem;
    line-height: 1.6;
    color: var(--color-secondary); 
    margin-bottom: 0;
    flex-grow: 1; 
}


@media (max-width: 768px) {
    .services-grid {
        grid-template-columns: 1fr; 
        gap: 25px;
    }
     .services-intro {
        font-size: 1rem;
        margin-bottom: 40px;
     }
     .service-card-content h3 {
        font-size: 1.25rem;
     }
}

@media (max-width: 480px) {
     .service-card-content {
          padding: 20px;
     }
}

.services-section .services-intro { 
    text-align: center;
    max-width: 800px;
    margin: 0 auto 50px auto;
    font-size: 1.1rem;
    color: var(--color-secondary);
    line-height: 1.7;
}
.service-card {
    background-color: var(--color-white);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 5px 20px rgba(47, 62, 70, 0.12);
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%; 
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 1px solid #eee;
    min-height: 408px;
}


.service-card-img {
    width: 100%;
    height: 270px; 
    object-fit: cover;
    display: block;
}
.service-card-content {
    padding: 25px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}
.service-card-content h3 {
    font-family: var(--font-title);
    font-weight: 600;
    font-size: 1.10rem;
    color: var(--color-primary);
    margin-top: 0;
    margin-bottom: 10px;
}
.service-card-content p {
    font-size: 0.90rem;
    line-height: 1.6;
    color: var(--color-secondary);
    margin-bottom: 0;
    margin-top: 0;
    flex-grow: 1;
}

</style>
<script>

import Swiper from 'swiper';
import { Navigation,Autoplay } from 'swiper/modules';

document.addEventListener('DOMContentLoaded', function () {
    const servicesSwiper = new Swiper('.services-swiper', {
        modules: [Navigation,Autoplay],
        // Optional parameters
        loop: false, // Enable continuous loop mode
        grabCursor: false,
        speed: 400,
        autoplay: {
            delay: 2000,
        },
        // How many slides to show
        slidesPerView: 1,
        spaceBetween: 20, 

        // Responsive breakpoints
        breakpoints: {
            768: {
                slidesPerView: 2,
                spaceBetween: 30
            },
            1024: {
                slidesPerView: 3,
                spaceBetween: 35
            }
        },

        // If we need pagination
        pagination: {
            el: '.swiper-pagination',
            clickable: true, 
        },

        // Navigation arrows
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },

         // Accessibility
        a11y: {
            enabled: true,
            prevSlideMessage: 'Diapositiva anterior',
            nextSlideMessage: 'Diapositiva siguiente',
            paginationBulletMessage: 'Ir a la diapositiva {{index}}',
        },
    });
     // Optional: Add keyboard control
     document.addEventListener('keydown', function (event) {
        if (event.key === 'ArrowLeft') {
            servicesSwiper.slidePrev();
        } else if (event.key === 'ArrowRight') {
            servicesSwiper.slideNext();
        }
    });
    // Optional: Add mouse stop on hover
    const swiperContainer = document.querySelector('.services-swiper');
    if (swiperContainer) {
        swiperContainer.addEventListener('mouseenter', function () {
            servicesSwiper.autoplay.stop();
        });
        swiperContainer.addEventListener('mouseleave', function () {
            servicesSwiper.autoplay.start();
        });
        // Optional: Add touch control
        swiperContainer.addEventListener('touchstart', function () {
            servicesSwiper.autoplay.stop();
        });
    }
});

   
</script>